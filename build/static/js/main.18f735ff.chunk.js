(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),u=n(2),l=n.n(u),i=n(4),s=n(3),d=function(e){var t=e.contactList,n=e.personfilter,a=e.deleteService;console.log("contactList :>> ",t);var c=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return r.a.createElement("div",null,c.map((function(e,t){return r.a.createElement("div",{key:e.name},e.name+" "+e.number,r.a.createElement("button",{onClick:function(){window.confirm("Do you really want to delete ".concat(e.name))&&a(e.id)}},"delete"))})))},f=function(e){var t=e.text;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,t))},m=function(e){var t=e.filter,n=e.handleChange;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:t,onChange:n}))},p=function(e){var t=e.handleSubmit,n=e.name,a=e.handleNameChange,c=e.number,o=e.handleNumberChange;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:c,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},h=n(5),b=n.n(h),v="/api/persons",g=function(){return b.a.get(v).then((function(e){return e.data}))},E=function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("id to delete :>> ",t),e.next=3,b.a.delete("".concat(v,"/").concat(t)).then((function(){return 0})).catch((function(e){return console.log("error :>> ",e),1}));case 3:return n=e.sent,e.abrupt("return",g().then((function(e){return{updatedContacts:e,error:n}})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("name to update :>> ",t),e.next=3,g().then(function(){var e=Object(i.a)(l.a.mark((function e(a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.find((function(e){return e.name===t})),e.next=3,b.a.patch("".concat(v,"/").concat(r.id),{number:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",g().then((function(e){return e})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C={getContacts:g,createContact:function(e,t){return g().then((function(n){var a=n.map((function(e){return e.name})).findIndex((function(t){return t===e}));return console.log("findResult :>> ",a),-1===a?(b.a.post(v,{name:e,number:t}),0):1}))},deleteContact:E,updateContactNumber:w},x=function(e){var t=e.textToDisplay,n=e.redText;return null===t|void 0===t?r.a.createElement("div",{className:"none"}," "):!0===n?r.a.createElement("div",{className:"errMsgTrue"},t):r.a.createElement("div",{className:"errMsg"},t)},j=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),h=u[0],b=u[1],v=Object(a.useState)(""),g=Object(s.a)(v,2),E=g[0],w=g[1],j=Object(a.useState)(""),O=Object(s.a)(j,2),y=O[0],N=O[1],S=Object(a.useState)(null),k=Object(s.a)(S,2),T=k[0],D=k[1],L=Object(a.useState)(!1),I=Object(s.a)(L,2),J=I[0],M=I[1];Object(a.useEffect)((function(){console.log("Effect"),C.getContacts().then((function(e){return c(e)}))}),[]);var B=function(){var e=Object(i.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Error message display"),n&&M(!0),D(t),setTimeout((function(){D(null)}),1200),J&&M(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(f,{text:"Phonebook"}),r.a.createElement(m,{filter:h,handleChange:function(e){b(e.target.value)}}),r.a.createElement(x,{textToDisplay:T,redText:J}),r.a.createElement(f,{text:"add new name"}),r.a.createElement(p,{handleSubmit:function(e){e.preventDefault(),C.createContact(E,y).then((function(e){0===e?(console.log("New contact added"),C.getContacts().then((function(e){return c(e)})),B("New contact added")):window.confirm("".concat(E," is already added to phonebook.\nDo you want to update new number to existing contact"))&&(console.log("old contacts :>> ",n),C.updateContactNumber(E,y).then((function(e){return c(e)})).then((function(){return B("Contact number changed")})),console.log("new contacts :>> ",n))}))},name:E,handleNameChange:function(e){w(e.target.value)},number:y,handleNumberChange:function(e){N(e.target.value)}}),r.a.createElement(f,{text:"Numbers"}),r.a.createElement(d,{contactList:n,personfilter:h.slice(),deleteService:function(e){C.deleteContact(e).then((function(t){if(console.log("newContacts :>> ",t),c(t.updatedContacts),1===t.error){console.log("Throwing error text");var a=n.find((function(t){return t.id===e}));B("error, contact ".concat(a.name," is allready deleted from server"),!0)}else console.log("Throwing normal text"),B("Contact deleted",!1)}))}}))};n(39);o.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.18f735ff.chunk.js.map