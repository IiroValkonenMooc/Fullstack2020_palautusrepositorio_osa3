(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(15),o=n.n(c),u=n(2),l=n.n(u),i=n(4),s=n(3),d=function(e){var t=e.contactList,n=e.personfilter,r=e.deleteService;console.log("contactList :>> ",t);var c=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return a.a.createElement("div",null,c.map((function(e,t){return a.a.createElement("div",{key:e.name},e.name+" "+e.number,a.a.createElement("button",{onClick:function(){window.confirm("Do you really want to delete ".concat(e.name))&&r(e.id)}},"delete"))})))},f=function(e){var t=e.text;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,t))},m=function(e){var t=e.filter,n=e.handleChange;return a.a.createElement("div",null,"filter shown with: ",a.a.createElement("input",{value:t,onChange:n}))},h=function(e){var t=e.handleSubmit,n=e.name,r=e.handleNameChange,c=e.number,o=e.handleNumberChange;return a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:n,onChange:r})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:c,onChange:o})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},p=n(5),b=n.n(p),v="/api/persons",g=function(){return b.a.get(v).then((function(e){return e.data}))},E=function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("id to delete :>> ",t),e.next=3,b.a.delete("".concat(v,"/").concat(t)).then((function(){return 0})).catch((function(e){return console.log("error :>> ",e),1}));case 3:return n=e.sent,e.abrupt("return",g().then((function(e){return{updatedContacts:e,error:n}})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={getContacts:g,createContact:function(e,t){return g().then((function(t){var n=t.map((function(e){return e.name})).findIndex((function(t){return t===e}));return console.log("findResult :>> ",n),n})).then(function(){var n=Object(i.a)(l.a.mark((function n(r){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(-1!==r){n.next=11;break}return n.next=3,b.a.post(v,{name:e,number:t}).catch((function(e){return{code:-1,error:e.response.data}}));case 3:if(-1!==(a=n.sent).code){n.next=8;break}return n.abrupt("return",a);case 8:return n.abrupt("return",0);case 9:n.next=12;break;case 11:return n.abrupt("return",1);case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},deleteContact:E,updateContactNumber:function(e,t){return g().then((function(t){var n=t.find((function(t){return t.name===e}));return console.log("found contact :>> ",n),n})).then((function(n){b.a.put("".concat(v,"/").concat(n.id),{name:e,number:t})})).then((function(){return g()}))}},C=function(e){var t=e.textToDisplay,n=e.redText;return null===t|void 0===t?a.a.createElement("div",{className:"none"}," "):!0===n?a.a.createElement("div",{className:"errMsgTrue"},t):a.a.createElement("div",{className:"errMsg"},t)},x=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),u=Object(s.a)(o,2),p=u[0],b=u[1],v=Object(r.useState)(""),g=Object(s.a)(v,2),E=g[0],x=g[1],j=Object(r.useState)(""),O=Object(s.a)(j,2),y=O[0],k=O[1],N=Object(r.useState)(null),S=Object(s.a)(N,2),T=S[0],D=S[1],L=Object(r.useState)(!1),I=Object(s.a)(L,2),J=I[0],M=I[1];Object(r.useEffect)((function(){console.log("Effect"),w.getContacts().then((function(e){return c(e)}))}),[]);var B=function(){var e=Object(i.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Error message display"),n&&M(!0),D(t),setTimeout((function(){D(null)}),1200),J&&M(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement(f,{text:"Phonebook"}),a.a.createElement(m,{filter:p,handleChange:function(e){b(e.target.value)}}),a.a.createElement(C,{textToDisplay:T,redText:J}),a.a.createElement(f,{text:"add new name"}),a.a.createElement(h,{handleSubmit:function(e){e.preventDefault(),w.createContact(E,y).then((function(e){if(-1===e.code)console.log(e),B(e.error.error,!0);else if(0===e)console.log("New contact added"),w.getContacts().then((function(e){return c(e)})).then(B("New contact added"));else{window.confirm("".concat(E," is already added to phonebook.\nDo you want to update new number to existing contact"))&&(console.log("old contacts :>> ",n),w.updateContactNumber(E,y).then((function(e){return c(e)})).then((function(){return B("Contact number changed")})),console.log("new contacts :>> ",n))}}))},name:E,handleNameChange:function(e){x(e.target.value)},number:y,handleNumberChange:function(e){k(e.target.value)}}),a.a.createElement(f,{text:"Numbers"}),a.a.createElement(d,{contactList:n,personfilter:p.slice(),deleteService:function(e){w.deleteContact(e).then((function(t){if(console.log("newContacts :>> ",t),c(t.updatedContacts),1===t.error){console.log("Throwing error text");var r=n.find((function(t){return t.id===e}));B("error, contact ".concat(r.name," is allready deleted from server"),!0)}else console.log("Throwing normal text"),B("Contact deleted",!1)}))}}))};n(39);o.a.render(a.a.createElement(x,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.3a4f5578.chunk.js.map